{% extends "base.html" %}

{% block content %}
    <ul class="top-level-list">
        {% for env in envs %}
        <li>
            <h4 style="color:#666">
                <span>{{'Environment: ' + env['environment']}}</span>
            </h4>
            <ul class="top-level-list">
                {% for group in env['groups'] %}
                    {% set group_title = '_'.join(group.split(' ')) %}
                    <div onclick="{{"return collapse_element(event, '" + env['environment'] + "-" + group_title + "');" | safe}}" class="boxstyle" style="cursor: pointer; background-color:#f8f8f8" id="{{'bg-' + env['environment'] + '-' + group_title | safe}}">
                        <h5 style='margin:10px 5px 10px 5px; color:#666'}}>
                            <span>
                                {{group}}
                            </span>
                            <span class="pull-right">
                                <!-- this is all very particular to formatting in check_utils.py-->
                                {% for status in env['groups'][group]['_statuses'] %}
                                    {% if env['groups'][group]['_statuses'][status] != '0' %}
                                        <span class="{{'check-' + status.lower()}}" style="margin-left:8px; background:none">
                                            {{env['groups'][group]['_statuses'][status] + ' ' + status}}
                                        </span>
                                    {% endif %}
                                {% endfor %}
                            </span>
                        </h5>
                        <div class="collapse collapse-div commonstyle container-fluid" id="{{env['environment'] + '-' + group_title | safe}}">
                            {% for title in env['groups'][group] %}
                                {% if title != '_statuses' %}
                                    <li>
                                        {{check_result(env['groups'][group][title], title, env['environment'], is_admin)}}
                                    </li>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            </ul>
        </li>
        <hr>
        {% endfor %}
    </ul>
{% endblock %}
